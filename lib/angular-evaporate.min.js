!function(e){"use strict";angular.module("evaporate",[]).provider("eva",function(){var t;this.config=function(e){t=e},this.$get=[function(){return{_:new e(t),urlBase:"http://"+t.bucket+".s3.amazonaws.com/"}}]}).directive("evaporate",["eva",function(e){function t(t,r){function n(){}function a(e,t){for(var r=e.length,n=0;r>n;n++)if(angular.equals(e[n],t))return n;return-1}t.data||(t.data={});var o=t.data,i=o.dir?o.dir+"/":"",s=o.timestampSeparator||"$",p=o.headersCommon||{},u=o.headersSigned||{},l="function"==typeof o.onFileProgress?o.onFileProgress:n,c="function"==typeof o.onFileComplete?o.onFileComplete:n,f="function"==typeof o.onFileError?o.onFileError:n;o.ready=!1,e._.supported&&(r.bind("change",function(r){o.files=[],angular.forEach(r.target.files,function(r){r.started=Date.now(),r.path_=i+r.started+s+r.name,r.url=e.urlBase+r.path_,e._.add({name:r.path_,file:r,contentType:r.type||"binary/octet-stream",notSignedHeadersAtInitiate:p,xAmzHeadersAtInitiate:u,complete:function(){r.completed=!0,c(r),t.$apply()},progress:function(e){r.progress=Math.round(1e4*e)/100,r.timeLeft=Math.round((100-r.progress)/r.progress*(Date.now()-r.started)/1e3),l(r),t.$apply()},error:function(e){var n=a(o.files,r);-1!==n&&o.files.splice(n,1),f(r,e),t.$apply()}}),o.files.push(r)}),t.$apply()}),o.ready=!0)}return{restrict:"A",link:t,scope:{data:"=evaModel"}}}])}(Evaporate);